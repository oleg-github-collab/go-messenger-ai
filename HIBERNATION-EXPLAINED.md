# üõèÔ∏è HIBERNATION - –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

## ‚úÖ –ó–ê–†–ê–ó (–Ω–∞ –¥—Ä–æ–ø–ª–µ—Ç—ñ):

**–£ –≤–∞—Å –≤–∂–µ —î –≤–ª–∞—Å–Ω–∏–π sleep-controller –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ!**

```
Location: /usr/local/bin/sleep-controller.sh
Status: ‚úÖ Running (active 9h)
Config: –ó–∞—Å–∏–Ω–∞—î –ø—ñ—Å–ª—è 1 –≥–æ–¥–∏–Ω–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
```

### –Ø–∫ –ø—Ä–∞—Ü—é—î:
1. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
   - –î–∏–≤–∏—Ç—å—Å—è –Ω–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –¥–æ –ø–æ—Ä—Ç—É 8080
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î Redis –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å–µ—Ä–≤—ñ—Å–∏

2. **–Ø–∫—â–æ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ 1 –≥–æ–¥–∏–Ω—É:**
   - –ó–±–µ—Ä—ñ–≥–∞—î Redis (SAVE)
   - –í–∏–º–∏–∫–∞—î –¥—Ä–æ–ø–ª–µ—Ç (shutdown)
   - **–ï–∫–æ–Ω–æ–º—ñ—è: ~$24/–º—ñ—Å ‚Üí ~$2-5/–º—ñ—Å** (–ø–ª–∞—Ç–∏—Ç–µ –ª–∏—à–µ –∫–æ–ª–∏ –ø—Ä–∞—Ü—é—î)

3. **–ü—Ä–æ–∫–∏–¥–∞–Ω–Ω—è:**
   - DigitalOcean –Ω–µ –º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ wake-up
   - –¢—Ä–µ–±–∞ –≤—Ä—É—á–Ω—É –≤–∫–ª—é—á–∏—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–±–æ API
   - **–ê–ë–û** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π proxy (Railway)

---

## ‚ùå Railway Proxy - –ü–†–û–ë–õ–ï–ú–ê:

**–©–æ —Ä–æ–±–∏–≤:**
- –ü–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞–≤ –∑–∞–ø–∏—Ç–∏ ‚Üí –±—É–¥–∏–≤ –¥—Ä–æ–ø–ª–µ—Ç ‚Üí –ø—Ä–æ–∫—Å—É–≤–∞–≤

**–ß–æ–º—É –Ω–µ –ø—Ä–∞—Ü—é—î:**
- –ù–µ –º–æ–∂–µ –¥–æ—Å—Ç—É–∫–∞—Ç–∏—Å—å –¥–æ –¥—Ä–æ–ø–ª–µ—Ç–∞
- TARGET_URL –∑–∞—Å—Ç–∞—Ä—ñ–≤ –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- –ú–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∞ –∑ authentication

---

## üéØ –†–Ü–®–ï–ù–ù–Ø - 3 –í–ê–†–Ü–ê–ù–¢–ò:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ë–ï–ó HIBERNATION ‚ö° (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)
**–ü–ª—é—Å–∏:**
- –ó–∞–≤–∂–¥–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π
- –®–≤–∏–¥–∫–∏–π –≤—ñ–¥–∫–ª–∏–∫
- –ù–µ —Ç—Ä–µ–±–∞ proxy

**–ú—ñ–Ω—É—Å–∏:**
- –ü–ª–∞—Ç–∏—Ç–µ $24/–º—ñ—Å –ø–æ—Å—Ç—ñ–π–Ω–æ

**–Ø–∫ –∑—Ä–æ–±–∏—Ç–∏:**
```bash
ssh root@64.227.116.250
systemctl stop sleep-controller
systemctl disable sleep-controller
```

---

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –í–ò–ü–†–ê–í–ò–¢–ò RAILWAY PROXY üîß
**–ü–ª—é—Å–∏:**
- –ï–∫–æ–Ω–æ–º—ñ—è –∫–æ—à—Ç—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–æ–∫–∏–¥–∞–Ω–Ω—è

**–ú—ñ–Ω—É—Å–∏:**
- –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç –ø–æ–≤—ñ–ª—å–Ω–∏–π (15-30 —Å–µ–∫)
- –°–∫–ª–∞–¥–Ω—ñ—à–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏

**–ü–æ—Ç—Ä—ñ–±–Ω–æ:**
- –û–Ω–æ–≤–∏—Ç–∏ TARGET_URL –≤ Railway –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- –ê–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ webhook –¥–ª—è wake-up

---

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–ò–ô PROXY (Cloudflare Workers) üåê
**–ü–ª—é—Å–∏:**
- –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π
- –®–≤–∏–¥–∫–∏–π
- –ù–∞–¥—ñ–π–Ω–∏–π

**–ú—ñ–Ω—É—Å–∏:**
- –¢—Ä–µ–±–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏

---

## üìä –ü–†–û TURN SERVER:

```
CNAME turn ‚Üí hibernation-proxy - –ú–û–ñ–ù–ê –í–ò–î–ê–õ–ò–¢–ò
A Record turn ‚Üí 164.90.242.199 - –ó–ê–õ–ò–®–ò–¢–ò
```

**–ß–æ–º—É –¥–≤–∞ –∑–∞–ø–∏—Å–∏:**
- –°—Ç–∞—Ä–∏–π CNAME –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—î –∑ A record
- A record –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π - —Ü–µ –≤–∞—à TURN —Å–µ—Ä–≤–µ—Ä
- CNAME –Ω–∞ proxy –ù–ï –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è TURN

**TURN –ø—Ä–∞—Ü—é—î –æ–∫—Ä–µ–º–æ –≤—ñ–¥ messenger**, –π–æ–º—É proxy –Ω–µ —Ç—Ä–µ–±–∞.

---

## üéØ –ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–Ø:

**–î–ª—è production messenger:**
1. **–í–ò–ú–ö–ù–£–¢–ò hibernation** (systemctl disable sleep-controller)
2. **–í–∏–¥–∞–ª–∏—Ç–∏ CNAME turn ‚Üí proxy** 
3. **–ó–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ A records**
4. **–°–µ—Ä–≤–µ—Ä –∑–∞–≤–∂–¥–∏ –æ–Ω–ª–∞–π–Ω = —à–≤–∏–¥–∫–æ –ø—Ä–∞—Ü—é—î**

**–ï–∫–æ–Ω–æ–º—ñ—è $24/–º—ñ—Å –Ω–µ –≤–∞—Ä—Ç–∞:**
- –ü–æ–≤—ñ–ª—å–Ω–æ–≥–æ –ø–µ—Ä—à–æ–≥–æ –∑–∞–ø–∏—Ç—É
- –°–∫–ª–∞–¥–Ω–æ—â—ñ–≤ –∑ proxy
- –ú–æ–∂–ª–∏–≤–∏—Ö –∑–±–æ—ó–≤ wake-up

**–¶–µ production —Å–∏—Å—Ç–µ–º–∞ - –∫—Ä–∞—â–µ —â–æ–± –ø—Ä–∞—Ü—é–≤–∞–ª–∞ 24/7!** üöÄ

---

## ‚úÖ –§–Ü–ù–ê–õ–¨–ù–ò–ô DNS (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é):

```
A Record @ ‚Üí 64.227.116.250
A Record messenger ‚Üí 64.227.116.250
A Record turn ‚Üí 164.90.242.199
A Record www ‚Üí 64.227.116.250
```

**–í–∏–¥–∞–ª–∏—Ç–∏:**
- ‚ùå A Record messenger ‚Üí 157.230.79.144 (—Å—Ç–∞—Ä–∏–π)
- ‚ùå CNAME turn ‚Üí hibernation-proxy (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

