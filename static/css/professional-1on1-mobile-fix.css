/**
 * Professional 1-on-1 Mobile UI Fixes
 * Clean, simple, no overlapping
 */

@media (max-width: 768px) {
    /* Reset body */
    body {
        overflow: auto;
        height: 100vh;
        width: 100vw;
        position: fixed;
    }

    /* Call container - full screen */
    .call-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        flex-direction: column !important;
        z-index: 1 !important;
    }

    /* Top bar - compact */
    .top-bar {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        height: 60px !important;
        z-index: 100 !important;
        padding: 12px 16px !important;
        background: rgba(15, 15, 25, 0.95) !important;
        backdrop-filter: blur(40px) !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    }

    /* Video area - full screen minus top bar and controls */
    .video-area {
        position: fixed !important;
        top: 60px !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 80px !important;
        width: 100% !important;
        height: auto !important;
        z-index: 2 !important;
    }

    /* Remote video - full screen */
    #remoteVideo, #remotePlaceholder {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
    }

    /* Local video PIP - smaller on mobile */
    .local-video-pip {
        position: fixed !important;
        top: 80px !important;
        right: 16px !important;
        width: 100px !important;
        height: 140px !important;
        z-index: 15 !important;
        border-radius: 12px !important;
        overflow: hidden !important;
        border: 2px solid rgba(255, 255, 255, 0.2) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5) !important;
    }

    #localVideo {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
    }

    /* Bottom controls - fixed */
    .bottom-controls {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        height: 80px !important;
        width: 100% !important;
        z-index: 100 !important;
        padding: 12px 8px !important;
        background: rgba(15, 15, 25, 0.98) !important;
        backdrop-filter: blur(40px) !important;
        border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
        display: flex !important;
        justify-content: space-around !important;
        align-items: center !important;
        gap: 4px !important;
    }

    /* Control buttons - smaller */
    .control-btn {
        width: 50px !important;
        height: 50px !important;
        min-width: 50px !important;
        padding: 0 !important;
        font-size: 20px !important;
        border-radius: 50% !important;
    }

    .control-btn .btn-icon {
        font-size: 20px !important;
    }

    .control-btn .btn-text {
        display: none !important;
    }

    /* Hide less important buttons on mobile */
    #screenShareBtn,
    #whiteboardBtn,
    #settingsBtn {
        display: none !important;
    }

    /* Panels - full screen overlays */
    .transcript-panel,
    .chat-panel,
    .settings-panel,
    .whiteboard-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        max-width: 100% !important;
        max-height: 100% !important;
        border-radius: 0 !important;
        z-index: 200 !important;
        transform: translateX(100%) !important;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    /* Show panel when active */
    .transcript-panel:not(.hidden),
    .chat-panel[style*="display: flex"],
    .settings-panel[style*="display: flex"],
    .whiteboard-container[style*="display: flex"] {
        transform: translateX(0) !important;
    }

    /* Modals - centered */
    .poll-modal,
    .ai-recommendation-modal {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 90% !important;
        max-width: 400px !important;
        max-height: 80vh !important;
        z-index: 300 !important;
        overflow-y: auto !important;
    }

    .ai-modal-backdrop {
        z-index: 299 !important;
    }

    /* Notetaker panel - above bottom controls */
    .notetaker-panel {
        position: fixed !important;
        bottom: 90px !important;
        left: 12px !important;
        right: 12px !important;
        width: auto !important;
        max-width: 100% !important;
        z-index: 50 !important;
    }

    /* Reactions panel - above video */
    .reactions-panel {
        position: fixed !important;
        bottom: 100px !important;
        right: 16px !important;
        z-index: 40 !important;
    }

    /* Alerts - top priority */
    .custom-alert {
        position: fixed !important;
        z-index: 10000 !important;
    }

    .custom-confirm {
        position: fixed !important;
        z-index: 10001 !important;
    }

    /* Hide desktop-only features */
    #toggleAITranscriptBtn {
        display: none !important;
    }

    /* Guest mode - extra simplification */
    body.guest-mode #pollBtn,
    body.guest-mode #recordBtn {
        display: none !important;
    }
}

/* Landscape mobile */
@media (max-width: 768px) and (orientation: landscape) {
    .local-video-pip {
        width: 80px !important;
        height: 110px !important;
        top: 70px !important;
        right: 12px !important;
    }

    .bottom-controls {
        height: 70px !important;
        padding: 8px 4px !important;
    }

    .control-btn {
        width: 45px !important;
        height: 45px !important;
        font-size: 18px !important;
    }

    .video-area {
        bottom: 70px !important;
    }

    .notetaker-panel {
        bottom: 80px !important;
        left: 8px !important;
        right: 8px !important;
        max-height: 40vh !important;
    }
}
