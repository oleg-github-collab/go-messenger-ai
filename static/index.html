<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f172a">
    <meta name="format-detection" content="telephone=no">
    <title>Meeting - Kaminskyi AI Messenger</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="call-container" id="callContainer">
        <!-- Main video area -->
        <div class="main-video" id="mainVideo">
            <!-- Remote video -->
            <video id="remoteVideo" autoplay playsinline></video>

            <!-- Remote video placeholder (shown when no video) -->
            <div class="remote-placeholder" id="remotePlaceholder">
                <div class="avatar">P</div>
                <div class="name">Waiting for partner</div>
                <div class="status" id="connectionStatus">Connecting...</div>
            </div>

            <!-- Local video (small overlay) -->
            <div class="local-video-overlay" id="localVideoOverlay">
                <video id="localVideo" autoplay muted playsinline></video>
                <div class="local-placeholder" id="localPlaceholder">
                    <div class="avatar">Y</div>
                </div>
            </div>

            <!-- Call timer (centered top) -->
            <div class="call-timer" id="callTimer">
                <span class="timer-dot"></span>
                <span class="timer-value">00:00</span>
            </div>

            <!-- Fullscreen button -->
            <button class="fullscreen-btn" id="fullscreenBtn" title="Fullscreen">
                <span>‚õ∂</span>
            </button>

            <!-- Picture-in-Picture button -->
            <button class="pip-btn" id="pipBtn" title="Picture-in-Picture">
                <span>‚ó±</span>
            </button>

            <!-- Chat bubble -->
            <div class="chat-bubble" id="chatBubble" style="display: none;">
                <div class="chat-avatar">üí¨</div>
                <div class="chat-text">New message received</div>
                <span class="chat-expand">‚Üí</span>
            </div>
        </div>

        <!-- Bottom controls -->
        <div class="bottom-controls" id="bottomControls">
            <div class="bottom-btn" id="micBtn">
                <span>üé§</span>
            </div>
            <div class="bottom-btn" id="videoBtn">
                <span>üìπ</span>
            </div>
            <div class="bottom-btn end-call" id="endCall">
                <span>üìû</span>
            </div>
            <div class="bottom-btn" id="chatBtn">
                <span>üí¨</span>
            </div>
            <div class="bottom-btn" id="settingsBtn">
                <span>‚öôÔ∏è</span>
            </div>
        </div>

        <!-- Settings panel -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-header">
                <h3>Call Settings</h3>
                <button class="close-settings" id="closeSettings">‚úï</button>
            </div>
            <div class="settings-content">
                <div class="setting-group">
                    <label>Video Quality</label>
                    <select id="videoQuality">
                        <option value="4k">4K (3840x2160)</option>
                        <option value="1080p" selected>Full HD (1920x1080)</option>
                        <option value="720p">HD (1280x720)</option>
                        <option value="480p">SD (854x480)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Frame Rate</label>
                    <select id="frameRate">
                        <option value="60">60 FPS</option>
                        <option value="30" selected>30 FPS</option>
                        <option value="24">24 FPS</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Audio Quality</label>
                    <select id="audioQuality">
                        <option value="high" selected>High (48kHz)</option>
                        <option value="medium">Medium (44.1kHz)</option>
                        <option value="low">Low (32kHz)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Camera</label>
                    <select id="cameraSelect"></select>
                </div>

                <div class="setting-group">
                    <label>Microphone</label>
                    <select id="microphoneSelect"></select>
                </div>

                <div class="setting-actions">
                    <button class="btn-primary" id="applySettings">Apply Settings</button>
                    <button class="btn-secondary" id="cancelSettings">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Full chat panel (hidden by default) -->
        <div class="chat-panel" id="chatPanel">
            <div class="chat-header">
                <button class="back-to-call" id="backToCall">‚Üê Back to call</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-empty" id="chatEmpty">
                    <div class="chat-empty-icon">üí¨</div>
                    <div class="chat-empty-title">No messages yet</div>
                    <div class="chat-empty-text">Send a message to start the conversation</div>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type a message..." />
                <button id="sendBtn">
                    <span>Send</span>
                    <span style="font-size: 18px;">‚û§</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Settings backdrop -->
    <div class="settings-backdrop" id="settingsBackdrop"></div>

    <script src="/static/webrtc.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>